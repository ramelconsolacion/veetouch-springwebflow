<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.prime.com.tr/ui"
	template="/WEB-INF/layouts/admin-standard.xhtml">
	
	<ui:define name="content">
		<p:layout style="width:auto;height:800px;">
			<p:layoutUnit position="left" scrollable="true" collapsible="true" width="250">
				<h:form id="leftPanel">
					<p:treeTable value="#{treeBean.root}" var="product" style="width: 100%" >
						<p:column style="width:150px;">
							<f:facet name="header">
								Name
							</f:facet>
							<p:commandLink update=":centerPanel" action="viewTestCaseList" style="width:100px;" rendered="#{product.class == 'class org.veetouch.model.VtMainproduct'}">
								<h:outputText value="#{product.name}" style="width:100px" />
							</p:commandLink>
							<p:commandLink update=":centerPanel" action="viewTestCaseList" style="width:100px;" rendered="#{product.class == 'class org.veetouch.model.VtSubproduct'}">
								<h:outputText value="#{product.name}" style="width:100px" />
							</p:commandLink>
						</p:column>
						<p:column style="width:100px;">
							<f:facet name="header">
								<div align="center">
									<p:commandLink title="Add Main-Product" styleClass="ui-icon ui-icon-plusthick" oncomplete="addMainProduct.show()"/>
								</div>
							</f:facet>
							<div align="center" >
								<h:panelGrid id="panel" columns="3" styleClass="panel-grid-toolbox">
									<p:commandLink title="Edit Module" styleClass="ui-icon ui-icon-pencil" >
									</p:commandLink>
									<p:commandLink title="Delete Module" styleClass="ui-icon ui-icon-trash" >
									</p:commandLink>
									<p:commandLink title="Add Sub Module" styleClass="ui-icon ui-icon-plusthick">
									</p:commandLink>
								</h:panelGrid>
							</div>
						</p:column>
					</p:treeTable>
				</h:form>
			</p:layoutUnit>
			<p:layoutUnit position="center" scrollable="true" collapsible="true" >
				<h:form id="centerPanel">
					<p:dataTable var="main_product" value="#{main_products}"
		                 paginator="true" rows="15"
		                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}">
				        <f:facet name="header">
				            List of Product
				        </f:facet>
				        <p:column>  
				            <f:facet name="header">  
				                <h:outputText value="Name" />  
				            </f:facet>  
				            <h:outputText value="#{main_product.name}" />
				         </p:column>
				         <p:column>  
				            <f:facet name="header">  
				                <h:outputText value="Sub Products" />  
				            </f:facet>  
				            <h:outputText value="#{main_product.name}" />
				         </p:column>
				         <p:column  style="width:80px;">
				            <f:facet name="header">
				            	<div align="center" >
				                	<p:commandLink title="Add Module" styleClass="ui-icon ui-icon-plusthick" oncomplete="addModule.show()"></p:commandLink>
				            	</div>
				            </f:facet>
				            <div align="center" >
								<h:panelGrid id="panel" columns="2" styleClass="panel-grid-toolbox" columnClasses="panel-grid-toolbox-column" style="width:auto;">
									<p:commandLink title="Edit Module" styleClass="ui-icon ui-icon-pencil" >
									</p:commandLink>
									<p:commandLink title="Delete Module" styleClass="ui-icon ui-icon-trash" >
									</p:commandLink>
								</h:panelGrid>
							</div>
				         </p:column>
		        	</p:dataTable>
				</h:form>
			</p:layoutUnit>
		</p:layout>
		
		<!-- 
		****************************************
		Add Main-Product Dialog
		****************************************  
		-->
		<p:dialog  widgetVar="addMainProduct" header="New Main Product" modal="true" hideEffect="explode">
			<h:form>
				<p:messages />
				<h:panelGrid columns="2">
					<h:outputLabel value="Main Product Name * " for="addMainProduct_Name"/>
					<h:inputText id="addMainProduct_Name" value="#{vt_adminproductService.mainProductName}" required="true"/>
					<p:commandButton type="submit" value="save"   action="add-MainProduct" update="@form,:leftPanel" oncomplete="resultStatus(xhr, status, args,addMainProduct);"/>
					<p:commandButton type="reset"  value="cancel" onclick="addMainProduct.hide()" immediate="true" />
				</h:panelGrid>
			</h:form>
		</p:dialog>
		
		<script>
			function resultStatus(xhr, status, args,widgetVar)
			{
				if(!args.saved)
				{
					saveFailedDialog.show();
				}
				else
				{
					widgetVar.hide();
				}
			}
		</script>
	</ui:define>
	
</ui:composition>